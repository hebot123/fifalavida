<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FIFA La Vida | World Cup 26™ Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        /* Brand Fonts */
        body { font-family: 'Inter', sans-serif; }
        h1, h2, h3, h4, h5, h6, .brand-font { font-family: 'Oswald', sans-serif; text-transform: uppercase; }
        
        /* FIFA 26™ Inspired Theme - High Contrast */
        :root {
            --brand-black: #000000;
            --brand-white: #FFFFFF;
            --brand-accent: #34D399; /* Emerald-ish accent for data */
        }

        /* Custom Patterns */
        .brand-pattern {
            background-color: #000000;
            background-image: radial-gradient(#333 1px, transparent 1px);
            background-size: 20px 20px;
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: #111; }
        ::-webkit-scrollbar-thumb { background: #444; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #fff; }

        /* Bracket Tree Connectors */
        .bracket-match { position: relative; }
        
        /* Desktop Bracket Lines */
        @media (min-width: 1024px) {
            .connector-right::after {
                content: ''; position: absolute; top: 50%; right: -1.5rem;
                width: 1.5rem; height: 1px; background: #444; z-index: 0;
            }
            .connector-bottom::before {
                content: ''; position: absolute; right: -1.5rem; top: 50%;
                width: 1px; height: 100%; background: #444; z-index: 0;
            }
        }

        /* Animations */
        @keyframes pulse-live {
            0% { box-shadow: 0 0 0 0 rgba(220, 38, 38, 0.7); }
            70% { box-shadow: 0 0 0 6px rgba(220, 38, 38, 0); }
            100% { box-shadow: 0 0 0 0 rgba(220, 38, 38, 0); }
        }
        .live-indicator {
            animation: pulse-live 2s infinite;
        }
        
        .article-hover:hover img {
            transform: scale(1.05);
        }
    </style>
</head>
<body class="bg-black text-white flex flex-col min-h-screen selection:bg-white selection:text-black">

    <!-- Navigation -->
    <nav class="bg-black border-b border-white/10 sticky top-0 z-50 backdrop-blur-md bg-opacity-90">
        <div class="max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-20 items-center">
                <!-- Logo -->
                <div class="flex-shrink-0 flex items-center gap-3 cursor-pointer group" onclick="switchView('home')">
                    <div class="bg-white text-black p-1 rounded-sm">
                        <i data-lucide="trophy" class="h-6 w-6"></i>
                    </div>
                    <div class="flex flex-col leading-none">
                        <span class="brand-font text-2xl font-bold tracking-tighter group-hover:text-gray-300 transition">FIFA LA VIDA</span>
                        <span class="text-[10px] uppercase tracking-[0.2em] text-gray-400">World Cup Hub</span>
                    </div>
                </div>
                
                <!-- Desktop Menu -->
                <div class="hidden md:flex space-x-1 items-center">
                    <button onclick="switchView('home')" class="text-gray-300 hover:text-white hover:bg-white/10 px-4 py-2 rounded text-sm font-bold uppercase tracking-wide transition">Home</button>
                    <button onclick="switchView('tournament')" class="text-white bg-white/10 px-4 py-2 rounded text-sm font-bold uppercase tracking-wide transition flex items-center gap-2 border border-white/20">
                        <i data-lucide="layout-grid" class="w-4 h-4"></i> Bracket
                    </button>
                    <div class="h-6 w-px bg-white/20 mx-4"></div>
                    <a href="https://collect.fifa.com/?referrer=fifalavida" target="_blank" class="bg-white text-black hover:bg-gray-200 px-6 py-2 rounded font-bold text-sm uppercase transition flex items-center gap-2">
                        <i data-lucide="gem" class="w-4 h-4"></i> My Collection
                    </a>
                </div>

                <!-- Mobile Toggle -->
                <button id="mobile-menu-btn" class="md:hidden text-white"><i data-lucide="menu" class="h-8 w-8"></i></button>
            </div>
        </div>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden bg-black border-b border-white/10">
            <div class="px-4 pt-2 pb-4 space-y-2">
                <button onclick="switchView('home')" class="block w-full text-left text-white py-3 font-bold uppercase border-b border-white/10">Home</button>
                <button onclick="switchView('tournament')" class="block w-full text-left text-white py-3 font-bold uppercase border-b border-white/10">Matches & Bracket</button>
                <a href="https://collect.fifa.com/?referrer=fifalavida" target="_blank" class="block text-center bg-white text-black py-3 mt-4 font-bold uppercase rounded">FIFA Collect</a>
            </div>
        </div>
    </nav>

    <!-- MAIN CONTAINER -->
    <main id="main-content" class="flex-grow">
        
        <!-- HOME VIEW -->
        <div id="home-view">
            <!-- Hero -->
            <div class="relative h-[70vh] flex items-center justify-center overflow-hidden brand-pattern">
                <div class="absolute inset-0 bg-[url('https://images.unsplash.com/photo-1522778119026-d647f0565c6a?ixlib=rb-4.0.3&auto=format&fit=crop&w=2000&q=80')] bg-cover bg-center opacity-40"></div>
                <div class="absolute inset-0 bg-gradient-to-t from-black via-black/60 to-transparent"></div>
                
                <div class="relative z-10 text-center px-4 max-w-5xl mx-auto">
                    <div class="inline-flex items-center gap-2 border border-white/30 bg-black/50 backdrop-blur px-4 py-1 rounded-full mb-6 animate-fade-up">
                        <div class="w-2 h-2 bg-emerald-500 rounded-full"></div>
                        <span class="text-xs font-bold uppercase tracking-widest">Official Match Schedule</span>
                    </div>
                    <h1 class="text-7xl md:text-9xl font-bold mb-2 leading-none tracking-tighter drop-shadow-2xl">
                        WE ARE <span class="text-transparent bg-clip-text bg-gradient-to-r from-white to-gray-500">26</span>
                    </h1>
                    <p class="text-xl md:text-2xl text-gray-300 max-w-2xl mx-auto font-light mb-10">
                        The biggest tournament in history. 104 Matches. 48 Teams. 3 Host Nations.
                    </p>
                    <button onclick="switchView('tournament')" class="bg-white text-black hover:scale-105 transition-transform font-bold text-lg px-10 py-4 rounded-none uppercase tracking-widest shadow-[0_0_30px_rgba(255,255,255,0.2)]">
                        View Full Schedule
                    </button>
                </div>
            </div>

            <!-- Host Nations & Flags Section -->
            <div class="bg-gray-900 border-y border-white/10 py-16">
                <div class="max-w-[1400px] mx-auto px-4">
                    <div class="text-center mb-12">
                        <h2 class="text-3xl md:text-4xl font-bold mb-2">THE <span class="text-emerald-400">HOSTS</span> & THE WORLD</h2>
                        <p class="text-gray-400">Three nations united. Forty-eight teams dreaming of glory.</p>
                    </div>

                    <!-- The 3 Hosts -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
                        <!-- Mexico -->
                        <div class="bg-black border border-white/10 p-6 rounded-xl text-center hover:border-emerald-500/50 transition group">
                            <img src="https://flagcdn.com/w160/mx.png" class="h-16 mx-auto rounded shadow-lg mb-4 group-hover:scale-110 transition">
                            <h3 class="text-2xl font-bold uppercase tracking-wide">Mexico</h3>
                            <span class="inline-block bg-emerald-500/20 text-emerald-400 text-[10px] font-bold px-2 py-1 rounded mt-2 uppercase tracking-widest">Host Nation</span>
                        </div>
                         <!-- Canada -->
                         <div class="bg-black border border-white/10 p-6 rounded-xl text-center hover:border-emerald-500/50 transition group">
                            <img src="https://flagcdn.com/w160/ca.png" class="h-16 mx-auto rounded shadow-lg mb-4 group-hover:scale-110 transition">
                            <h3 class="text-2xl font-bold uppercase tracking-wide">Canada</h3>
                            <span class="inline-block bg-emerald-500/20 text-emerald-400 text-[10px] font-bold px-2 py-1 rounded mt-2 uppercase tracking-widest">Host Nation</span>
                        </div>
                         <!-- USA -->
                         <div class="bg-black border border-white/10 p-6 rounded-xl text-center hover:border-emerald-500/50 transition group">
                            <img src="https://flagcdn.com/w160/us.png" class="h-16 mx-auto rounded shadow-lg mb-4 group-hover:scale-110 transition">
                            <h3 class="text-2xl font-bold uppercase tracking-wide">USA</h3>
                            <span class="inline-block bg-emerald-500/20 text-emerald-400 text-[10px] font-bold px-2 py-1 rounded mt-2 uppercase tracking-widest">Host Nation</span>
                        </div>
                    </div>

                    <!-- Other Nations Grid (Visual Representation) -->
                    <div class="text-center mb-6">
                        <span class="text-xs text-gray-500 uppercase tracking-widest">Potential Qualifiers & Contenders</span>
                    </div>
                    <div class="flex flex-wrap justify-center gap-4 opacity-60 hover:opacity-100 transition duration-500" id="flag-grid">
                        <!-- Flags injected by JS -->
                    </div>
                </div>
            </div>
        </div>

        <!-- TOURNAMENT VIEW -->
        <div id="tournament-view" class="hidden min-h-screen bg-[#050505]">
            
            <!-- Sticky Sub-Nav for Tournament -->
            <div class="bg-black border-b border-white/10 sticky top-20 z-40 py-4">
                <div class="max-w-[1600px] mx-auto px-4 flex flex-col md:flex-row justify-between items-center gap-4">
                    <div class="flex gap-2 bg-white/5 p-1 rounded-lg overflow-x-auto">
                        <button onclick="setFilter('all')" id="btn-all" class="filter-btn px-6 py-2 rounded font-bold text-sm uppercase bg-white text-black transition whitespace-nowrap">All Matches</button>
                        <button onclick="setFilter('group')" id="btn-group" class="filter-btn px-6 py-2 rounded font-bold text-sm uppercase text-gray-400 hover:text-white transition whitespace-nowrap">Group Stage</button>
                        <button onclick="setFilter('knockout')" id="btn-knockout" class="filter-btn px-6 py-2 rounded font-bold text-sm uppercase text-gray-400 hover:text-white transition whitespace-nowrap">Knockout</button>
                        <button onclick="setFilter('calendar')" id="btn-calendar" class="filter-btn px-6 py-2 rounded font-bold text-sm uppercase text-gray-400 hover:text-white transition whitespace-nowrap flex items-center gap-2"><i data-lucide="calendar" class="w-3 h-3"></i> Calendar View</button>
                    </div>
                    
                    <div class="flex items-center gap-4 text-xs font-mono text-gray-400">
                        <div class="flex items-center gap-2">
                            <span class="block w-2 h-2 bg-emerald-500 rounded-full"></span>
                            OFFICIAL SCHEDULE
                        </div>
                    </div>
                </div>
            </div>

            <div class="max-w-[1600px] mx-auto px-4 py-8">
                
                <!-- Container for JS Injection -->
                <div id="matches-container" class="grid gap-6">
                    <!-- Content populated by JS -->
                </div>

            </div>
        </div>

    </main>

    <footer class="bg-black border-t border-white/10 py-12 mt-auto">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <div class="brand-font text-2xl font-bold mb-4">FIFA LA VIDA</div>
            <p class="text-gray-500 text-sm mb-2">Unofficial Fan Hub. Not affiliated with FIFA.</p>
            <p class="text-gray-600 text-xs mb-6">
                This website was 100% generated by <span class="text-gray-400 font-bold">Google Gemini</span>.
            </p>
            
            <div class="flex flex-col md:flex-row justify-center gap-6 text-gray-400 mb-8">
                <a href="mailto:admin@fifalavida.com" class="hover:text-white flex items-center justify-center gap-2">
                    <i data-lucide="mail" class="w-4 h-4"></i> admin@fifalavida.com
                </a>
            </div>

            <div class="flex justify-center gap-6 text-gray-500 text-xs uppercase tracking-widest">
                <a href="#" class="hover:text-white">Privacy</a>
                <a href="#" class="hover:text-white">Terms</a>
            </div>
        </div>
    </footer>

    <script>
        // --- ICONS ---
        lucide.createIcons();

        // --- NAVIGATION LOGIC ---
        function switchView(view) {
            window.scrollTo({top: 0, behavior: 'smooth'});
            const home = document.getElementById('home-view');
            const tourney = document.getElementById('tournament-view');
            const mobileMenu = document.getElementById('mobile-menu');
            
            mobileMenu.classList.add('hidden');

            if(view === 'tournament') {
                home.classList.add('hidden');
                tourney.classList.remove('hidden');
                renderMatches(); // Initial Render
            } else {
                tourney.classList.add('hidden');
                home.classList.remove('hidden');
            }
        }

        document.getElementById('mobile-menu-btn').addEventListener('click', () => {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        });

        // --- FLAGS HELPERS ---
        const countryCodes = {
            "Mexico": "mx", "Canada": "ca", "USA": "us",
            "Argentina": "ar", "Brazil": "br", "France": "fr",
            "Germany": "de", "Spain": "es", "England": "gb-eng",
            "Portugal": "pt", "Netherlands": "nl", "Italy": "it",
            "Belgium": "be", "Croatia": "hr", "Uruguay": "uy",
            "Colombia": "co", "Japan": "jp", "South Korea": "kr",
            "Australia": "au", "Morocco": "ma", "Senegal": "sn",
            "Cameroon": "cm", "Ghana": "gh", "Saudi Arabia": "sa",
            "Iran": "ir", "Qatar": "qa", "Switzerland": "ch",
            "Denmark": "dk", "Sweden": "se", "Poland": "pl"
        };

        function getFlagHTML(teamName) {
            if (countryCodes[teamName]) {
                return `<img src="https://flagcdn.com/24x18/${countryCodes[teamName]}.png" class="w-5 h-3.5 object-cover rounded-sm shadow-sm">`;
            }
            return `<i data-lucide="globe" class="w-4 h-4 text-gray-600"></i>`;
        }

        // Populate Home Grid
        const flagGrid = document.getElementById('flag-grid');
        const displayNations = Object.keys(countryCodes).filter(c => !["Mexico", "Canada", "USA"].includes(c)); 
        
        displayNations.forEach(nation => {
            const div = document.createElement('div');
            div.className = "bg-white/5 border border-white/10 p-2 rounded flex items-center gap-2 w-32 justify-center";
            div.innerHTML = `<img src="https://flagcdn.com/24x18/${countryCodes[nation]}.png" class="w-4 h-3 rounded-sm shadow opacity-80"><span class="text-[10px] font-bold uppercase tracking-wider">${nation}</span>`;
            flagGrid.appendChild(div);
        });

        // --- TOURNAMENT ENGINE ---
        
        const matches = [];

        // OFFICIAL SCHEDULE MAPPING
        const officialVenues = {
            1: "Azteca, Mexico City", 2: "Guadalajara", 3: "Toronto", 4: "Los Angeles",
            5: "Boston", 6: "Vancouver", 7: "New York/New Jersey", 8: "San Francisco",
            9: "Philadelphia", 10: "Houston", 11: "Dallas", 12: "Monterrey",
            13: "Miami", 14: "Atlanta", 15: "Los Angeles", 16: "Seattle",
            17: "New York/New Jersey", 18: "Boston", 19: "Kansas City", 20: "San Francisco",
            21: "Toronto", 22: "Dallas", 23: "Houston", 24: "Azteca, Mexico City",
            25: "Atlanta", 26: "Los Angeles", 27: "Vancouver", 28: "Guadalajara",
            29: "Philadelphia", 30: "Boston", 31: "San Francisco", 32: "Seattle",
            33: "Toronto", 34: "Kansas City", 35: "Houston", 36: "Monterrey",
            37: "Miami", 38: "Atlanta", 39: "Los Angeles", 40: "Vancouver",
            41: "New York/New Jersey", 42: "Philadelphia", 43: "Dallas", 44: "San Francisco",
            45: "Boston", 46: "Toronto", 47: "Houston", 48: "Guadalajara",
            49: "Miami", 50: "Atlanta", 51: "Vancouver", 52: "Seattle",
            53: "Azteca, Mexico City", 54: "Monterrey", 55: "Philadelphia", 56: "New York/New Jersey",
            57: "Dallas", 58: "Kansas City", 59: "Los Angeles", 60: "San Francisco",
            61: "Boston", 62: "Toronto", 63: "Seattle", 64: "Vancouver",
            65: "Houston", 66: "Guadalajara", 67: "New York/New Jersey", 68: "Philadelphia",
            69: "Kansas City", 70: "Dallas", 71: "Miami", 72: "Atlanta",
            73: "Los Angeles", 74: "Boston", 75: "Monterrey", 76: "Houston",
            77: "New York/New Jersey", 78: "Dallas", 79: "Azteca, Mexico City", 80: "Atlanta",
            81: "San Francisco", 82: "Seattle", 83: "Toronto", 84: "Los Angeles",
            85: "Vancouver", 86: "Miami", 87: "Kansas City", 88: "Dallas",
            89: "Philadelphia", 90: "Houston", 91: "New York/New Jersey", 92: "Azteca, Mexico City",
            93: "Dallas", 94: "Seattle", 95: "Atlanta", 96: "Vancouver",
            97: "Boston", 98: "Los Angeles", 99: "Miami", 100: "Kansas City",
            101: "Dallas", 102: "Atlanta", 103: "Miami", 104: "New York/New Jersey"
        };

        // OFFICIAL GROUP MAPPING (A-L)
        const officialGroups = {
            1: 'A', 2: 'A', 25: 'A', 28: 'A', 53: 'A', 54: 'A',
            3: 'B', 8: 'B', 26: 'B', 27: 'B', 51: 'B', 52: 'B',
            5: 'C', 7: 'C', 29: 'C', 30: 'C', 49: 'C', 50: 'C',
            4: 'D', 6: 'D', 31: 'D', 32: 'D', 59: 'D', 60: 'D',
            9: 'E', 10: 'E', 33: 'E', 34: 'E', 55: 'E', 56: 'E',
            11: 'F', 12: 'F', 35: 'F', 36: 'F', 57: 'F', 58: 'F',
            15: 'G', 16: 'G', 39: 'G', 40: 'G', 63: 'G', 64: 'G',
            13: 'H', 14: 'H', 37: 'H', 38: 'H', 65: 'H', 66: 'H',
            17: 'I', 18: 'I', 41: 'I', 42: 'I', 61: 'I', 62: 'I',
            19: 'J', 20: 'J', 43: 'J', 44: 'J', 69: 'J', 70: 'J',
            23: 'K', 24: 'K', 47: 'K', 48: 'K', 71: 'K', 72: 'K',
            21: 'L', 22: 'L', 45: 'L', 46: 'L', 67: 'L', 68: 'L'
        };

        function getOfficialStadium(id) {
            return officialVenues[id] || "TBD";
        }

        function createMatch(id, stage, teamA, teamB, date, stadium, group) {
            return { id, stage, teamA, teamB, date, stadium, group, scoreA: null, scoreB: null, status: 'SCHEDULED', minute: 0 };
        }

        // Helper to assign pot number
        function getPotTBD(matchIndex, side) {
             const pattern = [[1, 2], [3, 4], [1, 3], [2, 4], [4, 1], [2, 3]];
             const patternIndex = (matchIndex - 1) % 6; 
             const pot = pattern[patternIndex][side === 'A' ? 0 : 1];
             return `TBD <span class="text-gray-600 font-normal text-[10px] ml-1">(Pot ${pot})</span>`;
        }

        // Group Stage (1-72)
        for (let i = 1; i <= 72; i++) {
            let date = `June ${11 + Math.floor((i-1)/4)}`;
            let stad = getOfficialStadium(i);
            let groupLabel = officialGroups[i] || 'A'; 
            
            let tA = getPotTBD(i, 'A');
            let tB = getPotTBD(i, 'B');

            if(i === 1) { tA = "Mexico"; tB = getPotTBD(i, 'B'); date = "June 11"; }
            if(i === 3) { tA = "Canada"; tB = getPotTBD(i, 'B'); date = "June 12"; }
            if(i === 4) { tA = "USA"; tB = getPotTBD(i, 'B'); date = "June 12"; }

            matches.push(createMatch(i, "Group Stage", tA, tB, date, stad, groupLabel));
        }

        // KNOCKOUTS (Matches 73-104) - SPECIFIC MAPPING
        const knockoutMapping = {
            73: ["Group A 2nd", "Group B 2nd", "June 28"],
            74: ["Group E Winner", "Group A/B/C/D/F 3rd", "June 29"],
            75: ["Group F Winner", "Group C 2nd", "June 29"],
            76: ["Group C Winner", "Group F 2nd", "June 29"],
            77: ["Group I Winner", "Group C/D/F/G/H 3rd", "June 30"],
            78: ["Group E 2nd", "Group I 2nd", "June 30"],
            79: ["Group A Winner", "Group C/E/F/H/I 3rd", "June 30"],
            80: ["Group L Winner", "Group E/H/I/J/K 3rd", "July 1"],
            81: ["Group D Winner", "Group B/E/F/I/J 3rd", "July 1"],
            82: ["Group G Winner", "Group A/E/H/I/J 3rd", "July 1"],
            83: ["Group K 2nd", "Group L 2nd", "July 2"],
            84: ["Group H Winner", "Group J 2nd", "July 2"],
            85: ["Group B Winner", "Group E/F/G/I/J 3rd", "July 2"],
            86: ["Group J Winner", "Group H 2nd", "July 3"],
            87: ["Group K Winner", "Group D/E/I/J/L 3rd", "July 3"],
            88: ["Group D 2nd", "Group G 2nd", "July 3"],
            
            89: ["Winner Match 74", "Winner Match 77", "July 4"],
            90: ["Winner Match 73", "Winner Match 75", "July 4"],
            91: ["Winner Match 76", "Winner Match 78", "July 5"],
            92: ["Winner Match 79", "Winner Match 80", "July 5"],
            93: ["Winner Match 83", "Winner Match 84", "July 6"],
            94: ["Winner Match 81", "Winner Match 82", "July 6"],
            95: ["Winner Match 86", "Winner Match 88", "July 7"],
            96: ["Winner Match 85", "Winner Match 87", "July 7"],
            
            97: ["Winner Match 89", "Winner Match 90", "July 9"],
            98: ["Winner Match 93", "Winner Match 94", "July 10"],
            99: ["Winner Match 91", "Winner Match 92", "July 11"],
            100: ["Winner Match 95", "Winner Match 96", "July 11"],
            
            101: ["Winner Match 97", "Winner Match 98", "July 14"],
            102: ["Winner Match 99", "Winner Match 100", "July 15"],
            
            103: ["Loser Match 101", "Loser Match 102", "July 18"],
            104: ["Winner Match 101", "Winner Match 102", "July 19"]
        };

        // Round of 32 (73-88)
        for (let i = 73; i <= 88; i++) {
            let data = knockoutMapping[i];
            matches.push(createMatch(i, "Round of 32", data[0], data[1], data[2], getOfficialStadium(i)));
        }

        // Round of 16 (89-96)
        for (let i = 89; i <= 96; i++) {
            let data = knockoutMapping[i];
            matches.push(createMatch(i, "Round of 16", data[0], data[1], data[2], getOfficialStadium(i)));
        }

        // Quarter-Finals (97-100)
        for (let i = 97; i <= 100; i++) {
            let data = knockoutMapping[i];
            matches.push(createMatch(i, "Quarter-Final", data[0], data[1], data[2], getOfficialStadium(i)));
        }

        // Semi-Finals (101-102)
        matches.push(createMatch(101, "Semi-Final", knockoutMapping[101][0], knockoutMapping[101][1], knockoutMapping[101][2], getOfficialStadium(101)));
        matches.push(createMatch(102, "Semi-Final", knockoutMapping[102][0], knockoutMapping[102][1], knockoutMapping[102][2], getOfficialStadium(102)));
        
        // Bronze (103)
        matches.push(createMatch(103, "Bronze Final", knockoutMapping[103][0], knockoutMapping[103][1], knockoutMapping[103][2], getOfficialStadium(103)));
        
        // Final (104)
        matches.push(createMatch(104, "FINAL", knockoutMapping[104][0], knockoutMapping[104][1], knockoutMapping[104][2], getOfficialStadium(104)));

        // --- RENDER LOGIC ---
        let currentFilter = 'all';

        function setFilter(filter) {
            currentFilter = filter;
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('bg-white', 'text-black');
                btn.classList.add('text-gray-400');
            });
            const activeBtn = document.getElementById(`btn-${filter}`);
            activeBtn.classList.remove('text-gray-400');
            activeBtn.classList.add('bg-white', 'text-black');
            renderMatches();
        }

        function renderMatches() {
            const container = document.getElementById('matches-container');
            container.innerHTML = '';
            
            if (currentFilter === 'calendar') {
                container.className = "flex flex-col gap-8 max-w-4xl mx-auto";
                
                // Group by Date (Simple string matching for this demo, assuming "June 11" format)
                // We need to preserve order 1-104
                let currentDates = [];
                let dateMap = {};
                
                matches.forEach(m => {
                    // Normalize date to handle variations if any
                    // Or simply use the date string
                    if (!dateMap[m.date]) {
                        dateMap[m.date] = [];
                        currentDates.push(m.date);
                    }
                    dateMap[m.date].push(m);
                });

                // Sort dates? They are chronologically inserted except for potential discrepancies. 
                // Given loop order 1->104, they are roughly sorted by match number, which generally follows date.
                // Let's rely on the insertion order of match IDs 1-104.
                
                currentDates.forEach(date => {
                    const dateSection = document.createElement('div');
                    dateSection.className = "relative pl-8 border-l-2 border-white/10 pb-8 last:pb-0";
                    
                    // Date Header
                    dateSection.innerHTML = `
                        <div class="absolute -left-[9px] top-0 w-4 h-4 bg-emerald-500 rounded-full ring-4 ring-black"></div>
                        <h3 class="text-2xl font-bold mb-6 text-emerald-400 font-mono uppercase tracking-widest">${date}, 2026</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            ${dateMap[date].map(m => getMatchCardHTML(m, true)).join('')}
                        </div>
                    `;
                    container.appendChild(dateSection);
                });
                
                lucide.createIcons();
                return;
            }

            // Standard Views
            let filteredMatches = matches;
            if(currentFilter === 'group') filteredMatches = matches.filter(m => m.id <= 72);
            if(currentFilter === 'knockout') filteredMatches = matches.filter(m => m.id > 72);

            if(currentFilter === 'knockout') {
                container.className = "flex flex-wrap justify-center gap-8";
                const stages = ["Round of 32", "Round of 16", "Quarter-Final", "Semi-Final", "FINAL"];
                stages.forEach(stage => {
                    const stageMatches = matches.filter(m => m.stage === stage || (stage === 'FINAL' && m.id >= 103));
                    const colDiv = document.createElement('div');
                    colDiv.className = "flex flex-col justify-around gap-4 min-w-[320px]"; // Slightly wider for long names
                    colDiv.innerHTML = `<h3 class="text-center text-gray-500 uppercase tracking-widest mb-4 font-bold">${stage}</h3>`;
                    stageMatches.forEach(m => colDiv.innerHTML += getMatchCardHTML(m, true));
                    container.appendChild(colDiv);
                });
            } else {
                container.className = "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4";
                filteredMatches.forEach(m => {
                    const div = document.createElement('div');
                    div.innerHTML = getMatchCardHTML(m, false);
                    container.appendChild(div);
                });
            }
            lucide.createIcons();
        }

        function getMatchCardHTML(match, isCompact) {
            const rawTeamA = match.teamA.replace(/<[^>]*>?/gm, '');
            const rawTeamB = match.teamB.replace(/<[^>]*>?/gm, '');
            
            const searchQuery = encodeURIComponent(`FIFA World Cup 2026 Match ${match.id} ${rawTeamA} vs ${rawTeamB} tickets`);
            const searchUrl = `https://www.google.com/search?q=${searchQuery}`;

            // Group Label logic
            let groupBadge = '';
            if (match.stage === 'Group Stage' && match.group) {
                groupBadge = `<span class="text-[10px] font-bold text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded border border-emerald-500/20 ml-2">GROUP ${match.group}</span>`;
            }

            return `
            <div class="bg-white/5 border border-white/10 rounded p-4 hover:bg-white/10 transition group relative overflow-hidden">
                <div class="flex justify-between items-center mb-3 text-xs uppercase tracking-wider">
                    <div class="flex items-center">
                        <span class="text-gray-500 font-bold">Match ${match.id}</span>
                        ${groupBadge}
                    </div>
                    <span class="text-gray-400">${match.date}</span>
                </div>
                
                <div class="space-y-2 mb-4">
                    <div class="flex justify-between items-center">
                        <div class="flex items-center gap-2 max-w-[80%]">
                            ${getFlagHTML(rawTeamA)}
                            <span class="font-bold text-sm md:text-base text-gray-300 leading-tight">${match.teamA}</span>
                        </div>
                        <span class="font-mono text-xl text-gray-500">-</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <div class="flex items-center gap-2 max-w-[80%]">
                            ${getFlagHTML(rawTeamB)}
                            <span class="font-bold text-sm md:text-base text-gray-300 leading-tight">${match.teamB}</span>
                        </div>
                        <span class="font-mono text-xl text-gray-500">-</span>
                    </div>
                </div>

                <div class="border-t border-white/10 pt-3 flex justify-between items-center text-xs">
                    <div class="text-gray-500 flex items-center gap-1 truncate max-w-[50%]">
                        <i data-lucide="map-pin" class="w-3 h-3 shrink-0"></i> ${match.stadium}
                    </div>
                    <div class="text-right">
                         <a href="${searchUrl}" target="_blank" class="inline-flex items-center gap-1 bg-emerald-500/10 hover:bg-emerald-500 text-emerald-400 hover:text-black border border-emerald-500/50 text-[10px] font-bold uppercase px-3 py-2 rounded transition group-hover:shadow-[0_0_10px_rgba(52,211,153,0.4)]">
                            Find Tickets <i data-lucide="external-link" class="w-3 h-3"></i>
                        </a>
                    </div>
                </div>
            </div>
            `;
        }
    </script>
</body>
</html>